<!DOCTYPE html>
<html>
<head>
<title>Wish Card</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="style.css"> 
</head>
<body class="card-page"> 

<div id="card">
  <div class="card-border"> 
      <div class="colored-frame"> 
          <div class="card-content">
              <div class="left-section">
                  <img id="cardImage" src="">
              </div>
              <div class="right-section">
                  <div class="header-text" id="headerTxt"></div>
                  <div class="main-message" id="msgTxt"></div>
                  <div class="footer-signature" id="footerTxt"></div>
              </div>
          </div>
      </div>
  </div>
</div>

<script>
const url = new URLSearchParams(window.location.search);
const type = url.get("type"); 
const cardType = url.get("cardType"); 
let name = url.get("name");
let age = url.get("age");

name = name ? decodeURIComponent(name) : "[Client's Name]";
age = age ? Number(age) : null;

const coloredFrameElement = document.querySelector(".colored-frame"); 
const cardImage = document.getElementById("cardImage");
const headerTxtElement = document.getElementById("headerTxt");
const msgTxtElement = document.getElementById("msgTxt");
const footerTxtElement = document.getElementById("footerTxt");

let imageURL = "";
let headerText = "";
let discountText = "";

// themes (png)
const themes = {
  'birthday_floral': { img: 'birthday66.png', borderColor: '#8A2BE2', headerColor: '#A377D6', discount: "a special birthday discount on a birth chart reading & Gemstone!" },
  'birthday_simple': { img: 'birthday77.png', borderColor: '#FFCC00', headerColor: '#FF8C00', discount: "a special birthday discount on a birth chart reading & Gemstone!" },
  'anniversary_cake': { img: 'anniversary88.png', borderColor: '#C2185B', headerColor: '#E91E63', discount: "a special anniversary discount on a birth chart reading & Gemstone!" },
  'anniversary_heart': { img: 'anniversary99.png', borderColor: '#8B0000', headerColor: '#DC3545', discount: "a special anniversary discount on a birth chart reading & Gemstone!" }
};

if (type === "birthday") {
  currentTheme = cardType === 'floral' ? themes.birthday_floral : themes.birthday_simple;
  if (age && age > 0) {
    // ordinal suffix for nicer text (1st, 2nd, 3rd, 4th...)
    function ordinal(n) {
      const s = ["th","st","nd","rd"];
      const v = n%100;
      return n + (s[(v-20)%10] || s[v] || s[0]);
    }
    headerText = `Happy ${ordinal(age)} Birthday, ${name}! ðŸŽ‰`;
  } else {
    headerText = `Happy Birthday, ${name}! ðŸŽ‰`;
  }
} else if (type === "anniversary") {
  currentTheme = cardType === 'cake' ? themes.anniversary_cake : themes.anniversary_heart;
  headerText = `Happy Anniversary, ${name}! ðŸŽ‰`;
} else {
  currentTheme = null;
}

if (currentTheme) {
  imageURL = currentTheme.img;
  discountText = currentTheme.discount;
  coloredFrameElement.style.borderColor = currentTheme.borderColor;
  headerTxtElement.style.color = currentTheme.headerColor;
  headerTxtElement.style.borderColor = currentTheme.headerColor;
} else {
  imageURL = "placeholder.png";
  headerText = `Hello, ${name}!`;
  discountText = "a special discount on a reading!";
  coloredFrameElement.style.borderColor = "#CCCCCC";
  headerTxtElement.style.color = "#333333";
  headerTxtElement.style.borderColor = "#333333";
  msgTxtElement.innerHTML = `Error: Invalid Card Type.`;
}

const mainMessage = 
  `May the stars bring you immense joy and success this year. Start your new personal year ` +
  `with cosmic guidance from Jyotish Devagya Amitsree. Get ${discountText}`;

cardImage.src = imageURL;
headerTxtElement.innerHTML = headerText;
msgTxtElement.innerHTML = mainMessage;

footerTxtElement.innerHTML =
  `With Best Wishes from<br>` +
  `<span class="company-name">Digdarshan Astro</span><br>` +
  `Jyotish Devagya Amitsree<br>` +
  `<span class="call-number">Call : 8697190840 / 9830637766</span>`;
</script>

</body>
</html>

