<!DOCTYPE html>
<html>
<head>
<title>Wish Card</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="style.css"> 
</head>
<body class="card-page"> 

<div id="card">
  <div class="card-border"> 
      <div class="colored-frame"> 
          <div class="card-content">
              <div class="left-section">
                  <img id="cardImage" src="" alt="card image">
              </div>
              <div class="right-section">
                  <div class="header-text" id="headerTxt"></div>
                  <div class="main-message" id="msgTxt"></div>
                  <div class="footer-signature" id="footerTxt"></div>
              </div>
          </div>
      </div>
  </div>
</div>

<script>
const url = new URLSearchParams(window.location.search);
const type = url.get("type"); 
const cardType = url.get("cardType"); 
let name = url.get("name");
let age = url.get("age");

name = name ? decodeURIComponent(name) : "[Client's Name]";
age = age ? Number(age) : null;

const coloredFrameElement = document.querySelector(".colored-frame"); 
const cardImage = document.getElementById("cardImage");
const headerTxtElement = document.getElementById("headerTxt");
const msgTxtElement = document.getElementById("msgTxt");
const footerTxtElement = document.getElementById("footerTxt");

let currentTheme = null;
let imageURL = "";
let headerText = "";
let discountText = "";

// themes: à¦›à¦¬à¦¿à¦° à¦¨à¦¾à¦® à¦à¦¬à¦‚ à¦¸à§‡à¦‡ à¦…à¦¨à§à¦¯à¦¾à§Ÿà§€ à¦¡à¦¿à¦œà¦¾à¦‡à¦¨ à¦•à¦¾à¦²à¦¾à¦° (borderColor, headerColor)
const themes = {
  // Birthday Card 1: birthday66.png (floral) - Purple/Blue Theme
  'birthday_floral': { img: 'birthday66.png', borderColor: '#8A2BE2', headerColor: '#A377D6', discount: "a special birthday discount on a birth chart reading & Gemstone!" },
  // Birthday Card 2: birthday77.png (simple) - Orange/Gold Theme
  'birthday_simple': { img: 'birthday77.png', borderColor: '#FFCC00', headerColor: '#FF8C00', discount: "a special birthday discount on a birth chart reading & Gemstone!" },
  // Anniversary Card 1: anniversary88.png (cake) - Dark Pink/Ruby Theme
  'anniversary_cake': { img: 'anniversary88.png', borderColor: '#C2185B', headerColor: '#E91E63', discount: "a special anniversary discount on a birth chart reading & Gemstone!" },
  // Anniversary Card 2: anniversary99.png (heart) - Dark Red/Crimson Theme
  'anniversary_heart': { img: 'anniversary99.png', borderColor: '#8B0000', headerColor: '#DC3545', discount: "a special anniversary discount on a birth chart reading & Gemstone!" }
};

// Function to add ordinal suffix (1st, 2nd, 3rd, 4th...)
function ordinal(n) {
  const s = ["th","st","nd","rd"];
  const v = n % 100;
  return n + (s[(v-20)%10] || s[v] || s[0]);
}

if (type === "birthday") {
  // Assign theme based on cardType
  currentTheme = cardType === 'floral' ? themes.birthday_floral : themes.birthday_simple;
  
  // Header text with Age
  if (age && age > 0) headerText = `Happy ${ordinal(age)} Birthday, ${decodeURIComponent(name)}! ðŸŽ‰`;
  else headerText = `Happy Birthday, ${decodeURIComponent(name)}! ðŸŽ‰`;
  
} else if (type === "anniversary") {
  // Assign theme based on cardType
  currentTheme = cardType === 'cake' ? themes.anniversary_cake : themes.anniversary_heart;
  
  // Header text with Anniversary Age (Your requested fix)
  if (age && age > 0) headerText = `Happy ${ordinal(age)} Anniversary, ${decodeURIComponent(name)}! ðŸŽ‰`;
  else headerText = `Happy Anniversary, ${decodeURIComponent(name)}! ðŸŽ‰`;
} else {
  // Fallback if type is invalid
  currentTheme = { img: 'birthday66.png', borderColor: '#CCCCCC', headerColor: '#333333', discount: "a special discount on a reading!" };
  headerText = `Error: Invalid Card Type.`;
  msgTxtElement.innerHTML = `Please check the URL parameters.`;
}


if (currentTheme) {
  imageURL = currentTheme.img;
  discountText = currentTheme.discount;
  
  // Apply theme-specific colors
  coloredFrameElement.style.borderColor = currentTheme.borderColor;
  headerTxtElement.style.color = currentTheme.headerColor;
  headerTxtElement.style.borderColor = currentTheme.headerColor; // For the dashed border
  
} 

// Main message content 
const mainMessage = `May the stars bring you immense joy and success this year. Start your new personal year with cosmic guidance from Jyotish Devagya Amitsree. Get ${discountText}`;

// Apply content
cardImage.src = imageURL;
headerTxtElement.innerHTML = headerText;
msgTxtElement.innerHTML = mainMessage;

// Footer/Signature content 
footerTxtElement.innerHTML =
  `With Best Wishes from<br>` +
  `<span class="company-name" style="color:${currentTheme.headerColor}">Digdarshan Astro</span><br>` +
  `Jyotish Devagya Amitsree<br>` +
  `<span class="call-number">Call : 8697190840 / 9830637766</span>`;
</script>

</body>
</html>
